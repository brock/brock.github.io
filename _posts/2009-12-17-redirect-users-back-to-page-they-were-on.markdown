---
layout: post
status: publish
published: true
title: Redirect Users Back to Page They Were On
author: brockangelo
author_login: brockangelo
author_email: brockangelo@gmail.com
author_url: http://brockangelo.com
excerpt: How to redirect users back to the page they were on when they clicked "login".
wordpress_id: 1312
wordpress_url: http://brockangelo.com/?p=1312
date: '2009-12-17 09:09:59 -0600'
date_gmt: '2009-12-17 14:09:59 -0600'
categories:
- WordPress
- PHP
- HTML
tags:
- intranet
- cms
- login
- redirect
- back
comments:
- id: 793
  author: Al
  author_email: alexalcyone@gmail.com
  author_url: http://www.troy-ounce.com
  date: '2010-06-14 22:57:41 -0500'
  date_gmt: '2010-06-15 03:57:41 -0500'
  content: This is a nice tip.. if it becomes popular, maybe Wordpress will listen
    up and include it in a future version.
- id: 815
  author: biber hapi
  author_email: biberhapi@gmail.com
  author_url: http://www.yaseminsifalibitkiler.com
  date: '2010-07-28 10:04:24 -0500'
  date_gmt: '2010-07-28 15:04:24 -0500'
  content: I hope wordpress will listen this!
- id: 2516
  author: Patrick
  author_email: directory@sneakymedia.co.uk
  author_url: http://www.sneakymedia.co.uk
  date: '2011-07-15 07:18:38 -0500'
  date_gmt: '2011-07-15 12:18:38 -0500'
  content: |-
    Great tip, searching for an age for this!

    Thanks
- id: 3351
  author: Karl
  author_email: karlhedony@gmail.com
  author_url: ''
  date: '2011-09-14 13:20:26 -0500'
  date_gmt: '2011-09-14 18:20:26 -0500'
  content: "Thanks buddy, you made my day\r\n\r\nand as Al said, Wp should include
    this definitly"
- id: 8791
  author: ryan
  author_email: ryan@ryanyoshimoto.com
  author_url: ''
  date: '2012-05-28 17:53:19 -0500'
  date_gmt: '2012-05-28 22:53:19 -0500'
  content: "noob question: in which file would you conditional code into?\r\n\r\nthanks!\r\n\r\n-ry"
- id: 20848
  author: adobe photoshop free
  author_email: minna_alves@gmail.com
  author_url: http://www.yareads.com/forum/member.php?action=viewpro&amp;member=DavisCherr
  date: '2013-01-31 07:36:16 -0600'
  date_gmt: '2013-01-31 12:36:16 -0600'
  content: "I'm impressed, I must say. Rarely can I encounter a web site that's equally
    educative and amusing, and let me tell you, you have \r\nhit the nail on the head.
    The problem is something not enough men and women are communicating wisely about.\r\nI'm
    delighted I found this in my search for something regarding this."
- id: 20850
  author: mahesh
  author_email: iammahesh4@gmail.com
  author_url: http://fresherplus.com
  date: '2013-02-13 09:14:39 -0600'
  date_gmt: '2013-02-13 14:14:39 -0600'
  content: Hi, where i have to paste it ?
- id: 20861
  author: baidu censor
  author_email: nefoevg@gmail.com
  author_url: http://www.baidu.com
  date: '2013-04-09 22:50:59 -0500'
  date_gmt: '2013-04-10 03:50:59 -0500'
  content: Other countries censor content and not just rogue regimes such as the Iranian
    mullocracy. Poor people!  http://www.baidu.com
- id: 20868
  author: cool dog rescue forums information
  author_email: mari_shelton@web.de
  author_url: ''
  date: '2013-04-29 15:07:22 -0500'
  date_gmt: '2013-04-29 20:07:22 -0500'
  content: "Attractive portion of content. I simply stumbled upon your site and \r\nin
    accession capital to assert that I acquire in fact loved account \r\nyour blog
    posts. Any way I'll be subscribing on your augment or even I fulfillment you access
    consistently fast."
- id: 20870
  author: click for golden retriever and poodle mix facts
  author_email: tyson.hargett@gmail.com
  author_url: http://mytoppennystocks.com/warren-buffet-on-how-to-invest-in-stocks/
  date: '2013-05-05 06:56:06 -0500'
  date_gmt: '2013-05-05 11:56:06 -0500'
  content: "I'm impressed, I must say. Rarely do I come across a blog that's both
    equally educative and amusing, \r\nand without a doubt, you have hit the nail
    on the head.\r\n\r\nThe issue is something which not enough men and women are
    speaking intelligently about.\r\nNow i'm very happy that I came across this during
    my search for something regarding this."
- id: 20871
  author: Get More Info
  author_email: carlmccrory@nospammail.net
  author_url: http://baseballballot.com/bighallvssmallhall/
  date: '2013-05-10 12:24:34 -0500'
  date_gmt: '2013-05-10 17:24:34 -0500'
  content: "Good day! Would you mind if I share your blog with my \r\nzynga group?
    There's a lot of folks that I think would really enjoy your content. Please let
    me know. Cheers"
- id: 20873
  author: o?rodek leczenia uzale?nie? warszawa
  author_email: kristy.pauley@gmail.com
  author_url: http://www.pcipedia.es:81/index.php/Usuario:MireyaHol
  date: '2013-05-25 06:27:19 -0500'
  date_gmt: '2013-05-25 11:27:19 -0500'
  content: "Ahaa, its pleasant dialogue on the topic of this paragraph here \r\nat
    this blog, I have read all that, so at this time me also \r\ncommenting at this
    place.\r\nVisit my website at <a href=\"http://www.pcipedia.es:81/index.php/Usuario:MireyaHol\"
    rel=\"nofollow\">o?rodek leczenia uzale?nie? warszawa</a>"
- id: 20881
  author: Get the facts
  author_email: jonasespie@freenet.de
  author_url: http://storify.com/cardiffuni/followers
  date: '2013-11-05 16:22:06 -0600'
  date_gmt: '2013-11-05 21:22:06 -0600'
  content: You've got very well information on this site.
- id: 21252
  author: tibet tourism
  author_email: sharyn.cottee@gmail.com
  author_url: http://www.tibetanstravel.com/wsly.aspx
  date: '2014-03-12 16:38:03 -0500'
  date_gmt: '2014-03-12 21:38:03 -0500'
  content: "This website definitely has all the information I needed \r\nabout this
    subject and didn't know who to ask."
---
<p>I am a fan of most things WordPress, but one thing I am not a fan of is the way that everyone gets sent to the Dashboard whenever they log in. Not everyone who logs into your site will write posts or administer the site. And for an intranet, this is a drag.</p>
<p>What I've always wanted was a way to reload the current page after I have logged in. So if I'm on the "Search" page, I just want to go to the login page, then go back to the page I was on when I clicked the "Login" link. Finally - a solution!</p>
<p>Thanks to <a href="http://davidchambersdesign.com/wordpress-login-redirect/">David Chambers</a> - it is as easy as changing the url that the "login" link points to. </p>
<p>[php]&lt;a href=&quot;&lt;?php echo get_option('siteurl'); ?&gt;/wp-login.php?redirect_to=&lt;?php echo urlencode($_SERVER['REQUEST_URI']); ?&gt;&quot;&gt;log in&lt;/a&gt;[/php]</p>
<p>He calls it WordPress Login Redirect. I would imagine that this would be a handy plugin for a lot of people. On an intranet, you may want to provide a link to the dashboard if they are an admin, or a link to logout if they are not. I have been using a very simple conditional statement that determines what to put in place of the login link after you are logged in.</p>
<p>[php]&lt;?php<br />
	global $current_user;<br />
	get_currentuserinfo();</p>
<p>	if (!(is_user_logged_in())) { ?&gt;<br />
		&lt;a href=&quot;&lt;?php echo get_option('siteurl'); ?&gt;/wp-login.php?redirect_to=&lt;?php echo urlencode($_SERVER['REQUEST_URI']); ?&gt;&quot;&gt;Log in&lt;/a&gt;<br />
	&lt;?php } elseif<br />
		(<br />
		(($current_user-&gt;user_login) == &quot;brock&quot;) 	||<br />
		(($current_user-&gt;user_login) == &quot;admin&quot;)<br />
		)<br />
		{<br />
			echo &quot;&lt;a href=\&quot;&quot;;<br />
			echo get_option('siteurl');<br />
			echo &quot;/wp-admin/\&quot;&gt;Dashboard&lt;/a&gt;&quot;;<br />
			} else { ?&gt;<br />
			&lt;a href=&quot;&lt;?php echo wp_logout_url( get_permalink() ); ?&gt;&quot; title=&quot;Logout&quot;&gt;Logout&lt;/a&gt;<br />
			&lt;?php<br />
		}<br />
?&gt;<br />
[/php]</p>
